'use strict';

const openMeteoParams = {
  latitude: 40.77069,
  longitude: -111.96503,
  daily: ['sunset', 'temperature_2m_max'],
  hourly: [
    'temperature_2m', 'temperature_800hPa', 'wind_speed_10m', 'wind_direction_10m', 'wind_gusts_10m', 'cape', 'lifted_index', 'pressure_msl',
    'windspeed_850hPa', 'windspeed_800hPa', 'windspeed_750hPa', 'windspeed_700hPa', 'windspeed_650hPa', 'windspeed_600hPa', 'windspeed_550hPa',
    'winddirection_850hPa', 'winddirection_800hPa', 'winddirection_750hPa', 'winddirection_700hPa', 'winddirection_650hPa', 'winddirection_600hPa', 'winddirection_550hPa',
    'geopotential_height_850hPa', 'geopotential_height_800hPa', 'geopotential_height_750hPa', 'geopotential_height_700hPa', 'geopotential_height_650hPa', 'geopotential_height_600hPa', 'geopotential_height_550hPa'
  ],
  windspeed_unit: 'mph',
  temperature_unit: 'fahrenheit',
  forecast_hours: 12,
  forecast_days: 1,
  timezone: 'America/Denver'
};

// Function to return an API URL assembled from specific input parameters
function buildAPIURL(params, repeatKeys = []) {
  const query = new URLSearchParams();

  for (const [key, value] of Object.entries(params)) {
    if (repeatKeys.includes(key) && Array.isArray(value)) {
      value.forEach(v => query.append(key, v));
    } else {
      query.set(key, Array.isArray(value) ? value.join(',') : value);
    }
  }
  return query.toString();
}

(async () => {
  // Get Open Meteo API data (documentation: https://open-meteo.com/en/docs/gfs-api)
  // Get Wind Aloft data via either AWS or GCP cloud function (redundancy)
  async function getOpenMeteoAndWindAloft() {
    const openMeteoURL = new URL('https://api.open-meteo.com/v1/gfs?');
    openMeteoURL.search = buildAPIURL(openMeteoParams);

    // Wind Aloft data - toggle between AWS and GCP (both exist for backup purposes)
    // AWS Lambda function (uses CORS config in console: Configuration > Function URL)
    const windAloftURL = 'https://2kjkumjjzukwnuiomukqzexcfy0yfynp.lambda-url.us-west-1.on.aws';
    // GCP Cloud Function (uses CORS in source code)
    // const windAloftURL = 'https://python-wind-aloft-ftp-483547589035.us-west2.run.app';

    const [openmeteoData, gcpWindAloftData] = await Promise.all([
      fetch(openMeteoURL).then(res => res.json()),
      fetch(windAloftURL).then(res => res.json())
    ]);
    setHiTempAndSunset(openmeteoData.daily); // main.js
    navSet(); // main.js (needs sunset time first)
    await Promise.all([
      windAloft(openmeteoData.hourly, gcpWindAloftData), //windaloft.js
      displayImages() // main.js
    ]);
  }

  // Get Sounding data via GCP Cloud Storage
  // Get Soaring Forecast text via the SLC Soarcast page - provides hiTemp (required to process soundingData)
  async function getSoundingAndSoaring() {
    const soundingURL = 'https://storage.googleapis.com/wasatch-wind-static/raob.json';
    const soaringForecastURL = 'https://forecast.weather.gov/product.php?site=SLC&issuedby=SLC&product=SRG&format=TXT&version=1';

    const [soundingData, soaringForecastPageContent] = await Promise.all([ // soundingData is a global variable in main.js
      fetch(soundingURL).then(res => res.json()),
      fetch(soaringForecastURL).then(res => res.text())
    ]);
    sounding(soundingData, soaringForecastPageContent); // sounding.js
  }

  // Get Synoptic Time Series API data (documentation: https://docs.synopticdata.com/services/weather-api)
  async function getTimeSeries() {
    const timeSeriesURL = 'https://python-synoptic-api-483547589035.us-west3.run.app';
    const timeSeriesData = await (await fetch(timeSeriesURL)).json();
    // const timeSeriesData = {"STATION":[{"ID":"53","STID":"KSLC","NAME":"Salt Lake City, Salt Lake City International Airport","ELEVATION":"4226.0","LATITUDE":"40.77069","LONGITUDE":"-111.96503","STATUS":"ACTIVE","MNET_ID":"1","STATE":"UT","COUNTRY":"US","TIMEZONE":"America\/Denver","ELEV_DEM":"4235.6","PERIOD_OF_RECORD":{"start":"1997-01-01T00:00:00Z","end":"2025-10-08T20:25:00Z"},"UNITS":{"position":"ft","elevation":"ft"},"SENSOR_VARIABLES":{"air_temp":{"air_temp_set_1":{}},"wind_speed":{"wind_speed_set_1":{}},"wind_direction":{"wind_direction_set_1":{}},"altimeter":{"altimeter_set_1":{}}},"OBSERVATIONS":{"date_time":["2:45 AM","2:50 AM","2:54 AM","2:55 AM","3:00 AM","3:05 AM","3:10 AM","3:15 AM","3:20 AM","3:25 AM","3:30 AM","3:35 AM","3:40 AM","3:45 AM","3:50 AM","3:54 AM","3:55 AM","4:00 AM","4:05 AM","4:10 AM","4:15 AM","4:20 AM","4:25 AM","4:30 AM","4:35 AM","4:40 AM","4:45 AM","4:50 AM","4:54 AM","4:55 AM","5:00 AM","5:05 AM","5:10 AM","5:15 AM","5:20 AM","5:25 AM","5:30 AM","5:35 AM","5:40 AM","5:45 AM","5:50 AM","5:54 AM","5:55 AM","6:00 AM","6:05 AM","6:10 AM","6:15 AM","6:20 AM","6:25 AM","6:30 AM","6:35 AM","6:40 AM","6:45 AM","6:50 AM","6:54 AM","6:55 AM","7:00 AM","7:05 AM","7:10 AM","7:15 AM","7:20 AM","7:25 AM","7:30 AM","7:35 AM","7:40 AM","7:45 AM","7:50 AM","7:54 AM","7:55 AM","8:00 AM","8:05 AM","8:10 AM","8:15 AM","8:20 AM","8:25 AM","8:30 AM","8:35 AM","8:40 AM","8:45 AM","8:50 AM","8:54 AM","8:55 AM","9:00 AM","9:05 AM","9:10 AM","9:15 AM","9:20 AM","9:25 AM","9:30 AM","9:35 AM","9:40 AM","9:45 AM","9:50 AM","9:54 AM","9:55 AM","10:00 AM","10:05 AM","10:10 AM","10:15 AM","10:20 AM","10:25 AM","10:30 AM","10:35 AM","10:40 AM","10:45 AM","10:50 AM","10:54 AM","10:55 AM","11:00 AM","11:05 AM","11:10 AM","11:15 AM","11:20 AM","11:25 AM","11:30 AM","11:35 AM","11:40 AM","11:45 AM","11:50 AM","11:54 AM","11:55 AM","12:00 PM","12:05 PM","12:10 PM","12:15 PM","12:20 PM","12:25 PM","12:30 PM","12:35 PM","12:40 PM","12:45 PM","12:50 PM","12:54 PM","12:55 PM","1:00 PM","1:05 PM","1:10 PM","1:15 PM","1:20 PM","1:25 PM","1:30 PM","1:35 PM","1:40 PM","1:45 PM","1:50 PM","1:54 PM","1:55 PM","2:00 PM","2:05 PM","2:10 PM","2:15 PM","2:20 PM","2:25 PM","2:30 PM","2:35 PM"],"air_temp_set_1":[46.4,46.4,46.94,46.4,46.4,46.4,46.4,46.4,46.4,46.4,46.4,46.4,46.4,46.4,46.4,46.94,46.4,46.4,46.4,46.4,46.4,46.4,46.4,46.4,46.4,46.4,46.4,46.4,46.04,46.4,46.4,46.4,46.4,46.4,46.4,46.4,46.4,46.4,46.4,46.4,46.4,46.04,46.4,46.4,46.4,46.4,44.6,46.4,46.4,46.4,46.4,46.4,46.4,46.4,46.04,46.4,46.4,46.4,46.4,46.4,46.4,46.4,46.4,46.4,46.4,46.4,46.4,46.04,46.4,44.6,46.4,46.4,48.2,48.2,48.2,48.2,48.2,50.0,50.0,51.8,51.08,51.8,51.8,51.8,51.8,53.6,53.6,53.6,53.6,53.6,53.6,55.4,55.4,55.04,55.4,55.4,55.4,55.4,55.4,55.4,55.4,57.2,57.2,57.2,57.2,57.2,57.92,57.2,59.0,60.8,59.0,60.8,60.8,60.8,60.8,62.6,62.6,62.6,62.6,62.96,62.6,64.4,64.4,64.4,64.4,64.4,64.4,64.4,64.4,66.2,64.4,66.2,66.02,66.2,66.2,68.0,68.0,66.2,68.0,66.2,68.0,69.8,68.0,68.0,69.8,69.08,69.8,69.8,69.8,69.8,69.8,69.8,69.8,69.8,69.8],"wind_speed_set_1":[4.6,6.91,5.75,5.75,5.75,4.6,4.6,5.75,6.91,6.91,6.91,6.91,5.75,5.75,5.75,5.75,5.75,4.6,4.6,4.6,5.75,5.75,4.6,4.6,3.45,4.6,4.6,4.6,5.75,4.6,4.6,4.6,3.45,3.45,4.6,4.6,4.6,3.45,4.6,4.6,3.45,3.45,3.45,3.45,3.45,4.6,3.45,3.45,3.45,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.45,3.45,3.45,4.6,4.6,3.45,3.45,3.45,4.6,3.45,4.6,5.75,6.91,6.91,6.91,6.91,5.75,4.6,3.45,4.6,4.6,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.45,0.0,3.45,3.45,4.6,4.6,4.6,3.45,4.6,3.45,0.0,3.45,0.0,0.0,0.0,0.0,0.0,0.0,3.45,0.0,0.0,0.0,0.0,0.0,3.45,3.45,0.0,4.6,3.45,0.0,4.6,0.0,3.45,0.0,5.75,4.6,3.45,4.6,5.75,4.6,4.6,3.45,5.75,0.0,0.0,null,8.06,6.91,5.75,6.91,10.36,6.91,6.91,6.91,9.21,8.06,9.21,8.06,8.06,9.21,8.06,11.51,8.06,8.06],"wind_direction_set_1":[140.0,130.0,130.0,130.0,140.0,130.0,140.0,140.0,130.0,130.0,130.0,140.0,140.0,140.0,150.0,150.0,150.0,160.0,160.0,160.0,160.0,150.0,150.0,140.0,140.0,130.0,140.0,140.0,140.0,130.0,130.0,140.0,150.0,140.0,130.0,130.0,140.0,140.0,140.0,130.0,130.0,140.0,140.0,140.0,160.0,150.0,160.0,170.0,150.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,190.0,160.0,170.0,150.0,140.0,140.0,150.0,140.0,150.0,130.0,120.0,110.0,110.0,120.0,110.0,120.0,120.0,130.0,130.0,140.0,140.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,290.0,0.0,250.0,240.0,250.0,250.0,260.0,270.0,260.0,250.0,0.0,250.0,0.0,0.0,0.0,0.0,0.0,0.0,320.0,0.0,0.0,0.0,0.0,0.0,360.0,10.0,0.0,350.0,10.0,0.0,330.0,0.0,10.0,0.0,30.0,30.0,40.0,340.0,350.0,20.0,20.0,20.0,20.0,0.0,0.0,null,320.0,300.0,320.0,330.0,340.0,10.0,350.0,330.0,340.0,330.0,320.0,320.0,320.0,330.0,330.0,330.0,340.0,310.0],"altimeter_set_1":[30.11,30.11,30.11,30.11,30.1,30.1,30.1,30.1,30.1,30.1,30.1,30.1,30.09,30.09,30.09,30.09,30.09,30.09,30.09,30.09,30.09,30.09,30.09,30.09,30.09,30.09,30.09,30.09,30.09,30.09,30.09,30.09,30.09,30.09,30.09,30.09,30.09,30.09,30.09,30.09,30.09,30.09,30.09,30.09,30.09,30.09,30.09,30.09,30.09,30.09,30.09,30.09,30.09,30.09,30.09,30.09,30.09,30.09,30.09,30.09,30.09,30.09,30.09,30.09,30.1,30.1,30.1,30.1,30.1,30.1,30.1,30.1,30.1,30.1,30.1,30.1,30.1,30.1,30.11,30.11,30.11,30.11,30.11,30.11,30.11,30.11,30.11,30.11,30.11,30.11,30.11,30.11,30.11,30.11,30.11,30.11,30.11,30.11,30.11,30.11,30.11,30.11,30.11,30.11,30.11,30.11,30.11,30.11,30.11,30.11,30.11,30.11,30.11,30.11,30.11,30.11,30.1,30.1,30.1,30.1,30.1,30.1,30.1,30.09,30.09,30.09,30.09,30.09,30.09,30.09,30.09,30.09,30.08,30.08,30.08,30.08,30.08,30.07,30.07,30.07,30.07,30.06,30.06,30.06,30.06,30.05,30.05,30.05,30.05,30.05,30.05,30.05,30.05,30.04,30.05]},"QC_FLAGGED":false,"RESTRICTED":false,"RESTRICTED_METADATA":false},{"ID":"54","STID":"KSVR","NAME":"South Valley Regional Airport","ELEVATION":"4596.0","LATITUDE":"40.61960","LONGITUDE":"-111.99016","STATUS":"ACTIVE","MNET_ID":"1","STATE":"UT","COUNTRY":"US","TIMEZONE":"America\/Denver","ELEV_DEM":"4603.0","PERIOD_OF_RECORD":{"start":"1997-01-01T00:00:00Z","end":"2025-10-08T20:15:00Z"},"UNITS":{"position":"ft","elevation":"ft"},"SENSOR_VARIABLES":{"air_temp":{"air_temp_set_1":{}},"wind_speed":{"wind_speed_set_1":{}},"wind_direction":{"wind_direction_set_1":{}},"altimeter":{"altimeter_set_1":{}},"wind_gust":{"wind_gust_set_1":{}}},"OBSERVATIONS":{"date_time":["2:55 AM","3:15 AM","3:35 AM","3:55 AM","4:15 AM","4:35 AM","6:55 AM","7:15 AM","7:35 AM","7:55 AM","8:15 AM","8:35 AM","8:55 AM","9:15 AM","9:35 AM","9:55 AM","10:15 AM","10:35 AM","10:55 AM","11:15 AM","11:35 AM","11:55 AM","12:15 PM","12:35 PM","12:55 PM","1:15 PM","1:35 PM","1:55 PM","2:15 PM","2:35 PM"],"air_temp_set_1":[46.4,44.6,44.6,null,null,null,48.2,44.6,46.4,44.6,48.2,50.0,51.8,53.6,55.4,57.2,59.0,60.8,60.8,62.6,66.2,68.0,68.0,68.0,71.6,73.4,73.4,75.2,75.2,75.2],"wind_speed_set_1":[6.91,null,null,null,null,null,2.3,2.3,4.6,5.75,6.91,6.91,9.21,9.21,8.06,9.21,null,6.91,4.6,4.6,11.51,12.66,18.41,11.51,14.96,12.66,16.11,17.26,17.26,16.11],"wind_direction_set_1":[250.0,null,null,null,null,null,210.0,null,null,200.0,180.0,190.0,160.0,160.0,150.0,150.0,null,130.0,null,null,160.0,160.0,160.0,130.0,160.0,150.0,160.0,150.0,140.0,160.0],"altimeter_set_1":[30.12,null,null,null,null,null,30.1,30.11,30.11,30.12,30.12,30.12,30.12,30.13,30.13,30.13,30.13,30.13,30.13,30.12,30.12,30.11,30.11,30.1,30.09,30.09,30.08,30.07,30.06,30.06],"wind_gust_set_1":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,18.41,null,17.26,null,20.71,23.02,null,21.86,21.86]},"QC_FLAGGED":false,"RESTRICTED":false,"RESTRICTED_METADATA":false},{"ID":"477","STID":"UT5","NAME":"MOUTH PARLEYS","ELEVATION":"4853.0","LATITUDE":"40.7122","LONGITUDE":"-111.8019","STATUS":"ACTIVE","MNET_ID":"4","STATE":"UT","COUNTRY":"US","TIMEZONE":"America\/Denver","ELEV_DEM":"4868.8","PERIOD_OF_RECORD":{"start":"1997-03-27T00:00:00Z","end":"2025-10-08T20:20:00Z"},"UNITS":{"position":"ft","elevation":"ft"},"SENSOR_VARIABLES":{"air_temp":{"air_temp_set_1":{}},"wind_speed":{"wind_speed_set_1":{}},"wind_direction":{"wind_direction_set_1":{}},"wind_gust":{"wind_gust_set_1":{}}},"OBSERVATIONS":{"date_time":["2:50 AM","3:00 AM","3:10 AM","3:20 AM","3:30 AM","3:40 AM","3:50 AM","4:00 AM","4:10 AM","4:20 AM","4:30 AM","4:40 AM","4:50 AM","5:00 AM","5:10 AM","5:20 AM","5:30 AM","5:40 AM","5:50 AM","6:00 AM","6:10 AM","6:20 AM","6:30 AM","6:40 AM","6:50 AM","7:00 AM","7:10 AM","7:20 AM","7:30 AM","7:40 AM","7:50 AM","8:00 AM","8:10 AM","8:20 AM","8:30 AM","8:40 AM","8:50 AM","9:00 AM","9:10 AM","9:20 AM","9:30 AM","9:40 AM","9:50 AM","10:00 AM","10:10 AM","10:20 AM","10:30 AM","10:40 AM","10:50 AM","11:00 AM","11:10 AM","11:20 AM","11:30 AM","11:40 AM","11:50 AM","12:00 PM","12:10 PM","12:20 PM","12:30 PM","12:40 PM","12:50 PM","1:00 PM","1:10 PM","1:20 PM","1:30 PM","1:40 PM","1:50 PM","2:00 PM","2:10 PM","2:20 PM","2:30 PM"],"air_temp_set_1":[49.18,50.43,50.1,49.38,49.28,49.05,49.44,49.82,49.49,49.92,50.35,49.65,49.49,48.67,49.05,49.13,48.52,48.65,48.98,48.67,48.73,49.05,48.63,48.9,48.63,48.95,48.85,48.6,49.67,49.38,49.41,49.01,48.39,48.95,48.88,49.44,48.55,49.59,51.9,53.76,54.9,55.06,57.75,57.24,58.24,59.48,58.95,58.89,58.87,59.89,61.13,62.22,63.27,62.68,64.16,63.44,64.64,64.54,64.99,66.11,65.69,66.91,68.0,68.81,68.2,68.81,69.37,70.59,70.76,71.63,72.27],"wind_speed_set_1":[6.08,1.8,6.03,6.02,4.4,3.37,4.61,2.07,1.74,4.15,4.18,4.72,4.46,5.66,3.03,2.87,4.83,4.98,5.29,1.22,4.93,5.89,2.49,7.74,1.98,0.56,1.73,2.31,1.85,5.79,5.58,8.14,5.88,5.02,5.11,5.67,9.34,4.56,4.85,2.28,3.89,4.15,2.09,3.44,1.47,2.52,2.87,2.67,3.37,4.57,3.87,3.22,2.93,4.91,2.84,5.08,5.35,4.75,5.36,5.27,5.71,4.88,2.81,2.12,1.35,2.46,4.17,3.35,4.44,4.05,5.25],"wind_direction_set_1":[118.1,19.18,108.1,89.3,111.1,96.0,96.2,344.7,73.38,99.3,110.8,105.2,93.2,100.3,89.8,97.8,110.5,68.72,91.3,89.8,103.9,97.5,66.4,95.4,70.97,53.01,88.3,104.7,60.28,63.74,75.38,74.45,79.71,77.46,72.36,71.23,67.51,66.82,75.64,79.26,93.0,112.5,57.61,128.1,154.0,198.2,227.3,262.4,246.0,247.2,257.2,250.9,271.5,245.0,263.0,250.2,217.0,253.9,255.0,267.7,249.4,222.3,215.3,160.5,287.7,236.8,262.4,190.7,219.2,306.1,255.2],"wind_gust_set_1":[9.21,5.91,10.08,8.55,12.92,9.64,10.74,8.55,8.99,10.74,7.46,8.11,8.11,8.99,8.55,9.21,11.84,8.77,9.42,10.08,7.24,11.17,8.55,11.84,8.77,6.13,5.91,10.3,7.89,10.96,10.74,13.81,14.03,8.33,10.96,9.64,12.49,11.4,8.99,8.11,7.01,5.48,6.13,4.82,3.07,4.17,5.91,4.82,7.24,6.13,5.91,5.91,7.24,8.99,6.79,7.67,7.67,8.33,8.99,8.33,8.77,9.21,7.89,8.55,7.01,6.57,7.01,8.33,7.01,13.81,12.7]},"QC_FLAGGED":false,"RESTRICTED":false,"RESTRICTED_METADATA":false},{"ID":"528","STID":"AMB","NAME":"ALTA - MT BALDY","ELEVATION":"11066.0","LATITUDE":"40.5677","LONGITUDE":"-111.6374","STATUS":"ACTIVE","MNET_ID":"6","STATE":"UT","COUNTRY":"US","TIMEZONE":"America\/Denver","ELEV_DEM":"10964.6","PERIOD_OF_RECORD":{"start":"1998-11-21T00:00:00Z","end":"2025-10-08T20:00:00Z"},"UNITS":{"position":"ft","elevation":"ft"},"SENSOR_VARIABLES":{"air_temp":{"air_temp_set_1":{}},"wind_speed":{"wind_speed_set_1":{}},"wind_direction":{"wind_direction_set_1":{}},"wind_gust":{"wind_gust_set_1":{}}},"OBSERVATIONS":{"date_time":["3:00 AM","4:00 AM","5:00 AM","6:00 AM","7:00 AM","8:00 AM","9:00 AM","10:00 AM","11:00 AM","12:00 PM","1:00 PM","2:00 PM"],"air_temp_set_1":[38.3,38.6,38.5,38.1,37.8,38.0,38.9,40.4,42.6,44.2,44.8,44.7],"wind_speed_set_1":[19.49,20.79,22.3,20.09,19.0,17.3,13.2,13.0,9.49,10.1,10.7,13.39],"wind_direction_set_1":[194.6,201.5,204.1,205.2,202.0,201.0,195.2,181.7,174.0,175.9,179.0,192.1],"wind_gust_set_1":[32.2,36.4,36.89,33.99,32.3,34.29,38.6,35.29,31.09,37.3,29.7,43.89]},"QC_FLAGGED":false,"RESTRICTED":false,"RESTRICTED_METADATA":false},{"ID":"534","STID":"OGP","NAME":"SNOWBASIN - MOUNT OGDEN","ELEVATION":"9570.0","LATITUDE":"41.200","LONGITUDE":"-111.881","STATUS":"ACTIVE","MNET_ID":"8","STATE":"UT","COUNTRY":"US","TIMEZONE":"America\/Denver","ELEV_DEM":"9340.6","PERIOD_OF_RECORD":{"start":"1997-01-01T00:00:00Z","end":"2025-10-08T20:30:00Z"},"UNITS":{"position":"ft","elevation":"ft"},"SENSOR_VARIABLES":{"air_temp":{"air_temp_set_1":{}},"wind_speed":{"wind_speed_set_1":{}},"wind_direction":{"wind_direction_set_1":{}},"wind_gust":{"wind_gust_set_1":{}}},"OBSERVATIONS":{"date_time":["2:45 AM","3:00 AM","3:15 AM","3:30 AM","3:45 AM","4:00 AM","4:15 AM","4:30 AM","4:45 AM","5:00 AM","5:15 AM","5:30 AM","5:45 AM","6:00 AM","6:15 AM","6:30 AM","6:45 AM","7:00 AM","7:15 AM","7:30 AM","7:45 AM","8:00 AM","8:15 AM","8:30 AM","8:45 AM","9:00 AM","9:15 AM","9:30 AM","9:45 AM","10:00 AM","10:15 AM","10:30 AM","10:45 AM","11:00 AM","11:15 AM","11:30 AM","11:45 AM","12:00 PM","12:15 PM","12:30 PM","12:45 PM","1:00 PM","1:15 PM","1:30 PM","1:45 PM","2:00 PM","2:15 PM","2:30 PM"],"air_temp_set_1":[42.62,42.5,42.75,42.87,42.62,42.62,42.87,42.5,42.5,42.56,42.38,42.32,42.26,42.32,42.2,41.77,42.26,41.96,41.84,41.9,41.17,41.29,41.41,40.92,41.53,41.17,41.41,41.78,41.72,41.05,41.66,41.72,41.17,42.15,42.33,42.63,42.63,43.31,43.74,43.98,43.86,44.41,45.08,44.84,45.26,45.69,46.3,45.93],"wind_speed_set_1":[24.44,23.68,22.67,23.48,23.75,22.38,24.35,23.45,23.04,22.92,23.56,25.34,25.85,26.21,26.62,27.99,29.32,30.19,29.53,31.9,30.84,30.13,32.19,32.07,30.16,30.21,31.38,32.69,31.51,28.63,30.04,30.37,30.42,31.28,31.58,29.92,30.13,30.36,31.25,29.71,29.48,30.09,27.98,26.5,24.75,22.61,22.06,20.09],"wind_direction_set_1":[221.7,221.5,224.6,222.8,218.3,217.1,217.8,212.7,212.3,210.6,209.1,203.8,202.3,206.1,204.0,202.1,200.4,199.1,197.1,199.4,200.4,201.3,201.2,201.1,202.1,200.2,201.5,202.5,201.2,202.7,199.1,198.3,198.6,199.2,199.8,199.7,197.7,198.9,198.8,199.2,200.5,202.8,205.5,207.2,209.5,221.2,226.7,230.4],"wind_gust_set_1":[31.5,27.4,28.19,29.4,26.3,26.0,27.8,26.0,27.49,26.7,27.59,27.7,27.89,30.2,29.49,30.6,33.5,33.5,33.2,33.5,32.99,35.8,36.4,35.8,35.29,33.9,37.7,37.7,35.7,35.29,34.59,34.99,34.99,36.1,37.6,35.5,35.89,35.2,37.19,35.2,35.59,35.29,33.6,34.5,33.29,30.9,30.09,30.39]},"QC_FLAGGED":false,"RESTRICTED":false,"RESTRICTED_METADATA":false},{"ID":"538","STID":"HDP","NAME":"Hidden Peak","ELEVATION":"11000.0","LATITUDE":"40.56106","LONGITUDE":"-111.64522","STATUS":"ACTIVE","MNET_ID":"86","STATE":"UT","COUNTRY":"US","TIMEZONE":"America\/Denver","ELEV_DEM":"10971.1","PERIOD_OF_RECORD":{"start":"1997-01-01T00:00:00Z","end":"2025-10-08T20:00:00Z"},"UNITS":{"position":"ft","elevation":"ft"},"SENSOR_VARIABLES":{"air_temp":{"air_temp_set_1":{}},"wind_speed":{"wind_speed_set_1":{}},"wind_direction":{"wind_direction_set_1":{}},"wind_gust":{"wind_gust_set_1":{}}},"OBSERVATIONS":{"date_time":["2:45 AM","3:00 AM","3:15 AM","3:30 AM","3:45 AM","4:00 AM","4:15 AM","4:30 AM","4:45 AM","5:00 AM","5:15 AM","5:30 AM","5:45 AM","6:00 AM","6:15 AM","6:30 AM","6:45 AM","7:00 AM","7:15 AM","7:30 AM","7:45 AM","8:00 AM","8:15 AM","8:30 AM","8:45 AM","9:00 AM","9:15 AM","9:30 AM","9:45 AM","10:00 AM","10:15 AM","10:30 AM","10:45 AM","11:00 AM","11:15 AM","11:30 AM","11:45 AM","12:00 PM","12:15 PM","12:30 PM","12:45 PM","1:00 PM","1:15 PM","1:30 PM","1:45 PM","2:00 PM","2:15 PM","2:30 PM"],"air_temp_set_1":[39.0,39.0,39.0,39.0,39.0,39.0,39.0,39.0,39.0,39.0,38.0,38.0,38.0,38.0,38.0,38.0,38.0,38.0,38.0,38.0,38.0,38.0,39.0,39.0,39.0,39.0,40.0,40.0,40.0,40.0,41.0,41.0,41.0,42.0,42.0,42.0,42.0,43.0,43.0,43.0,42.0,43.0,43.0,43.0,43.0,43.0,43.0,43.0],"wind_speed_set_1":[16.0,14.99,13.99,13.99,13.99,14.99,18.0,19.0,17.0,13.99,12.0,12.0,12.0,13.99,14.99,13.0,11.0,10.0,8.0,13.0,12.0,10.0,7.0,10.0,10.0,10.0,8.0,13.0,13.0,12.0,10.0,10.0,10.0,9.0,12.0,13.0,13.0,13.0,12.0,12.0,13.99,11.0,13.0,11.0,11.0,14.99,12.0,18.0],"wind_direction_set_1":[202.5,202.5,202.5,202.5,202.5,202.5,202.5,202.5,202.5,180.0,180.0,180.0,202.5,180.0,202.5,202.5,180.0,180.0,202.5,202.5,202.5,202.5,202.5,202.5,180.0,202.5,202.5,202.5,202.5,202.5,202.5,225.0,225.0,225.0,202.5,225.0,225.0,202.5,225.0,225.0,202.5,225.0,225.0,225.0,225.0,225.0,202.5,202.5],"wind_gust_set_1":[28.0,27.0,21.0,31.0,21.0,23.99,28.0,31.0,31.0,27.0,21.0,23.99,23.99,22.99,25.0,31.0,22.99,17.0,20.0,22.99,22.99,21.0,30.0,25.0,23.99,18.0,13.99,28.0,21.0,23.99,20.0,21.0,22.99,17.0,37.0,31.0,31.0,23.99,23.99,30.0,30.0,27.0,27.0,20.0,17.0,33.99,22.99,31.99]},"QC_FLAGGED":false,"RESTRICTED":false,"RESTRICTED_METADATA":false},{"ID":"2524","STID":"FPS","NAME":"Flight Park South","ELEVATION":"5202.0","LATITUDE":"40.45689","LONGITUDE":"-111.90483","STATUS":"ACTIVE","MNET_ID":"153","STATE":"UT","COUNTRY":"US","TIMEZONE":"America\/Denver","ELEV_DEM":"5154.2","PERIOD_OF_RECORD":{"start":"2010-11-23T00:00:00Z","end":"2025-10-08T20:30:00Z"},"UNITS":{"position":"ft","elevation":"ft"},"SENSOR_VARIABLES":{"air_temp":{"air_temp_set_1":{}},"wind_speed":{"wind_speed_set_1":{}},"wind_direction":{"wind_direction_set_1":{}},"wind_gust":{"wind_gust_set_1":{}},"altimeter":{"altimeter_set_1d":{"derived_from":["pressure_set_1"]}}},"OBSERVATIONS":{"date_time":["2:45 AM","2:50 AM","2:55 AM","3:00 AM","3:05 AM","3:10 AM","3:15 AM","3:20 AM","3:25 AM","3:30 AM","3:35 AM","3:40 AM","3:45 AM","3:50 AM","3:55 AM","4:00 AM","4:05 AM","4:10 AM","4:15 AM","4:20 AM","4:25 AM","4:30 AM","4:35 AM","4:40 AM","4:45 AM","4:50 AM","4:55 AM","5:00 AM","5:05 AM","5:10 AM","5:15 AM","5:20 AM","5:25 AM","5:30 AM","5:35 AM","5:40 AM","5:45 AM","5:50 AM","5:55 AM","6:00 AM","6:05 AM","6:10 AM","6:15 AM","6:20 AM","6:25 AM","6:30 AM","6:35 AM","6:40 AM","6:45 AM","6:50 AM","6:55 AM","7:00 AM","7:05 AM","7:10 AM","7:15 AM","7:20 AM","7:25 AM","7:30 AM","7:35 AM","7:40 AM","7:45 AM","7:50 AM","7:55 AM","8:00 AM","8:05 AM","8:10 AM","8:15 AM","8:20 AM","8:25 AM","8:30 AM","8:35 AM","8:40 AM","8:45 AM","8:50 AM","8:55 AM","9:00 AM","9:05 AM","9:10 AM","9:15 AM","9:20 AM","9:25 AM","9:30 AM","9:35 AM","9:40 AM","9:45 AM","9:50 AM","9:55 AM","10:00 AM","10:05 AM","10:10 AM","10:15 AM","10:20 AM","10:25 AM","10:30 AM","10:35 AM","10:40 AM","10:45 AM","10:50 AM","10:55 AM","11:00 AM","11:05 AM","11:10 AM","11:15 AM","11:20 AM","11:25 AM","11:30 AM","11:35 AM","11:40 AM","11:45 AM","11:50 AM","11:55 AM","12:00 PM","12:05 PM","12:10 PM","12:15 PM","12:20 PM","12:25 PM","12:30 PM","12:35 PM","12:40 PM","12:45 PM","12:50 PM","12:55 PM","1:00 PM","1:05 PM","1:10 PM","1:15 PM","1:20 PM","1:25 PM","1:30 PM","1:35 PM","1:40 PM","1:45 PM","1:50 PM","1:55 PM","2:00 PM","2:05 PM","2:10 PM","2:15 PM","2:20 PM","2:25 PM","2:30 PM","2:35 PM","2:40 PM"],"air_temp_set_1":[51.17,50.99,51.26,51.44,51.49,51.03,50.6,50.49,50.3,50.12,49.68,49.19,48.96,48.67,48.01,47.31,46.66,47.04,46.85,47.3,47.74,47.76,48.23,48.81,49.51,49.21,49.6,49.94,49.71,49.25,49.09,49.35,49.14,49.18,48.98,48.67,48.48,48.69,48.22,48.08,48.17,48.09,47.93,47.38,47.31,46.76,46.7,46.99,46.82,45.71,44.94,44.78,44.56,44.96,46.01,46.6,46.68,46.54,46.73,46.8,47.01,46.18,45.76,46.83,47.44,48.25,48.77,49.06,49.6,50.04,50.39,50.41,50.45,50.91,51.39,51.52,51.87,51.91,52.24,52.4,52.61,52.73,53.41,53.64,54.01,54.39,54.41,54.51,54.83,54.98,55.32,55.57,55.87,56.41,56.55,56.42,56.7,57.03,57.17,57.38,57.97,58.54,58.39,58.64,59.25,59.63,60.0,60.91,61.04,61.03,61.23,61.28,61.3,62.17,61.98,62.76,62.75,62.78,63.17,64.11,64.39,64.35,65.28,65.57,66.62,66.57,67.07,67.89,68.16,68.63,68.89,69.59,69.78,70.92,71.12,70.81,71.18,72.69,72.56,72.12,72.34,72.84,72.49,73.37],"wind_speed_set_1":[4.33,5.11,4.95,5.01,5.45,6.2,6.72,7.04,7.53,7.69,7.73,8.25,8.07,8.67,9.32,8.9,9.52,9.17,9.21,9.99,11.28,11.81,12.13,11.92,11.3,11.82,12.82,12.69,11.68,11.36,13.28,14.48,14.2,14.04,13.21,14.1,13.9,13.96,13.35,13.74,13.79,13.95,12.92,14.04,14.94,14.88,13.97,12.81,12.06,12.16,11.3,10.5,10.58,11.12,11.42,11.65,12.23,12.88,14.44,14.94,14.14,12.05,12.14,12.85,13.74,13.86,12.84,12.31,12.41,13.14,14.07,13.27,13.0,13.18,14.65,13.91,15.77,15.92,15.39,15.52,16.09,17.25,18.7,18.46,17.87,17.1,17.17,16.41,15.81,15.55,15.36,16.58,16.95,17.27,16.58,17.58,17.12,17.7,17.8,16.94,16.77,16.92,18.02,17.1,17.73,17.35,17.11,17.63,17.46,16.65,16.26,17.42,14.94,16.73,14.65,15.62,15.49,15.74,14.28,14.72,14.91,14.2,15.35,14.91,15.58,15.63,14.88,15.02,15.65,14.61,13.43,15.59,15.89,17.12,18.63,19.46,19.3,17.24,19.35,18.5,17.79,17.38,19.11,18.99],"wind_direction_set_1":[167.9,163.93,159.87,165.82,161.14,156.42,158.76,157.75,162.16,161.04,160.75,164.81,165.8,171.61,174.58,176.64,175.13,172.13,163.91,162.6,165.72,167.62,164.25,160.19,164.04,163.42,164.52,163.2,160.09,160.11,165.6,164.89,164.19,162.2,163.71,165.03,162.93,163.27,164.61,162.08,163.4,162.72,163.83,168.45,169.14,170.5,166.95,162.41,165.22,172.31,173.46,171.51,168.59,154.65,154.68,159.02,163.16,166.91,172.23,173.31,171.02,162.79,156.16,155.73,158.34,162.67,163.35,165.7,167.25,170.52,171.5,169.98,167.93,168.48,166.65,166.5,169.37,170.86,169.81,169.16,166.3,169.92,173.49,175.19,176.1,177.17,176.52,176.96,177.97,178.43,179.97,182.12,183.24,187.78,182.02,181.09,183.16,178.91,182.48,180.13,180.08,177.13,178.72,175.71,175.72,179.11,176.27,179.46,177.61,178.1,184.4,180.08,183.54,180.0,185.17,186.62,188.75,182.99,183.23,186.57,181.35,181.83,177.98,180.28,182.15,179.02,176.4,175.02,177.26,174.15,171.53,165.87,174.63,170.92,174.65,165.88,154.27,160.55,169.3,171.06,166.33,156.27,160.98,165.83],"wind_gust_set_1":[4.95,5.7,5.31,5.35,6.13,6.71,7.41,7.46,8.16,8.33,8.5,9.82,9.52,10.74,11.22,9.82,11.44,10.25,11.31,11.31,13.37,13.81,13.9,15.12,13.54,13.9,15.78,16.14,15.26,15.65,15.6,16.79,16.14,15.7,14.99,15.43,15.87,16.48,14.68,15.78,15.92,15.51,14.95,15.78,15.56,15.51,15.26,13.86,13.06,13.5,12.14,11.92,11.61,14.25,13.54,13.2,14.12,14.25,16.14,15.82,15.56,13.5,14.86,14.34,15.17,15.34,14.47,13.76,13.81,15.17,15.26,15.12,15.17,14.86,16.04,15.92,17.71,17.35,17.27,17.23,17.76,18.98,20.82,20.6,20.16,18.72,19.46,18.63,17.84,18.72,18.19,18.54,19.02,19.07,19.46,19.2,20.16,20.6,20.25,19.64,19.9,20.91,21.44,19.38,19.82,20.21,18.94,20.08,20.08,19.6,18.76,19.9,19.16,19.16,18.54,18.72,18.63,19.2,18.54,17.13,19.29,19.07,18.06,17.58,19.29,18.94,19.99,18.06,19.55,17.88,16.57,19.51,19.33,21.61,22.27,22.41,23.24,23.45,24.42,23.24,23.63,21.0,23.14,23.24],"altimeter_set_1d":[30.22,30.22,30.22,30.22,30.22,30.22,30.22,30.22,30.22,30.21,30.21,30.21,30.21,30.21,30.21,30.21,30.21,30.2,30.2,30.2,30.2,30.2,30.2,30.2,30.2,30.2,30.2,30.2,30.2,30.2,30.2,30.2,30.2,30.2,30.2,30.2,30.2,30.2,30.2,30.2,30.2,30.2,30.2,30.2,30.2,30.2,30.2,30.2,30.2,30.2,30.2,30.2,30.2,30.2,30.2,30.2,30.2,30.2,30.21,30.21,30.21,30.21,30.21,30.21,30.21,30.21,30.21,30.22,30.22,30.22,30.22,30.22,30.22,30.22,30.22,30.22,30.22,30.23,30.23,30.23,30.23,30.23,30.23,30.23,30.23,30.23,30.23,30.23,30.23,30.23,30.23,30.23,30.23,30.23,30.23,30.23,30.23,30.23,30.23,30.23,30.23,30.23,30.23,30.23,30.23,30.23,30.23,30.23,30.23,30.23,30.23,30.23,30.23,30.22,30.22,30.22,30.22,30.22,30.22,30.22,30.22,30.22,30.22,30.21,30.21,30.21,30.21,30.21,30.21,30.21,30.2,30.2,30.19,30.19,30.19,30.19,30.18,30.18,30.18,30.18,30.18,30.18,30.18,30.18]},"QC_FLAGGED":false,"RESTRICTED":false,"RESTRICTED_METADATA":false},{"ID":"22477","STID":"BRW","NAME":"BRIGHTON GREAT WESTERN","ELEVATION":"10565.0","LATITUDE":"40.59230","LONGITUDE":"-111.56160","STATUS":"ACTIVE","MNET_ID":"6","STATE":"UT","COUNTRY":"US","TIMEZONE":"America\/Denver","ELEV_DEM":"10436.4","PERIOD_OF_RECORD":{"start":"2007-12-18T00:00:00Z","end":"2025-10-08T20:00:00Z"},"UNITS":{"position":"ft","elevation":"ft"},"SENSOR_VARIABLES":{"air_temp":{"air_temp_set_1":{}},"wind_speed":{"wind_speed_set_1":{}},"wind_direction":{"wind_direction_set_1":{}},"wind_gust":{"wind_gust_set_1":{}}},"OBSERVATIONS":{"date_time":["2:45 AM","3:00 AM","3:15 AM","3:30 AM","3:45 AM","4:00 AM","4:15 AM","4:30 AM","4:45 AM","5:00 AM","5:15 AM","5:30 AM","5:45 AM","6:00 AM","6:15 AM","6:30 AM","6:45 AM","7:00 AM","7:15 AM","7:30 AM","7:45 AM","8:00 AM","8:15 AM","8:30 AM","8:45 AM","9:00 AM","9:15 AM","9:30 AM","9:45 AM","10:00 AM","10:15 AM","10:30 AM","10:45 AM","11:00 AM","11:15 AM","11:30 AM","11:45 AM","12:00 PM","12:15 PM","12:30 PM","12:45 PM","1:00 PM","1:15 PM","1:30 PM","1:45 PM","2:00 PM"],"air_temp_set_1":[40.9,40.7,40.9,40.75,40.47,40.7,40.24,40.58,40.62,40.27,40.3,40.4,40.3,40.14,40.04,39.91,40.01,39.89,39.81,39.55,39.58,39.63,39.73,39.89,40.22,40.32,40.6,40.93,41.29,41.24,41.82,42.07,42.41,43.22,43.65,43.42,43.89,44.39,44.37,44.75,44.87,45.02,45.23,45.13,44.95,45.56],"wind_speed_set_1":[16.75,18.06,18.73,17.09,14.86,16.93,17.05,18.25,18.6,19.28,19.43,16.92,17.39,16.65,17.52,17.75,19.09,16.38,17.03,18.29,13.2,17.75,16.11,14.68,18.58,19.89,18.72,12.84,16.59,16.33,18.5,17.05,23.1,13.2,13.96,17.01,19.73,15.4,17.27,18.88,16.3,9.64,12.08,9.48,19.25,15.78],"wind_direction_set_1":[179.7,185.3,188.5,184.5,187.3,180.6,182.9,181.8,180.1,184.5,186.4,180.8,185.3,186.8,176.7,183.4,183.4,187.6,197.9,189.9,203.1,199.8,202.8,193.6,199.0,190.8,187.0,192.7,194.2,212.9,203.4,197.6,183.4,211.8,202.0,208.7,197.3,210.8,203.0,199.9,200.2,216.1,229.5,209.5,213.5,218.3],"wind_gust_set_1":[23.1,21.39,22.73,21.83,21.76,21.39,20.79,23.92,27.06,23.47,25.63,24.74,24.52,23.55,22.73,23.92,23.03,21.76,22.58,22.58,22.58,25.34,24.29,25.41,26.08,26.53,27.5,29.89,32.04,31.15,28.99,29.36,33.53,34.8,32.49,35.1,33.46,35.92,31.22,32.57,30.4,32.79,26.76,24.74,30.04,25.71]},"QC_FLAGGED":false,"RESTRICTED":false,"RESTRICTED_METADATA":false},{"ID":"29319","STID":"D6120","NAME":"DW6120 Sandy","ELEVATION":"5161.0","LATITUDE":"40.55200","LONGITUDE":"-111.80333","STATUS":"ACTIVE","MNET_ID":"65","STATE":"UT","COUNTRY":"US","TIMEZONE":"America\/Denver","ELEV_DEM":"5160.8","PERIOD_OF_RECORD":{"start":"2010-11-03T00:00:00Z","end":"2025-10-08T20:30:00Z"},"UNITS":{"position":"ft","elevation":"ft"},"SENSOR_VARIABLES":{"air_temp":{"air_temp_set_1":{}},"wind_speed":{"wind_speed_set_1":{}},"wind_direction":{"wind_direction_set_1":{}},"wind_gust":{"wind_gust_set_1":{}},"altimeter":{"altimeter_set_1":{}}},"OBSERVATIONS":{"date_time":["2:45 AM","3:00 AM","3:15 AM","3:30 AM","3:45 AM","4:00 AM","4:15 AM","4:30 AM","4:46 AM","5:00 AM","5:15 AM","5:30 AM","5:45 AM","6:00 AM","6:16 AM","6:30 AM","6:45 AM","7:00 AM","7:15 AM","7:30 AM","7:46 AM","8:00 AM","8:15 AM","8:30 AM","8:45 AM","9:00 AM","9:15 AM","9:30 AM","9:45 AM","10:00 AM","10:15 AM","10:30 AM","10:46 AM","11:01 AM","11:15 AM","11:30 AM","11:45 AM","12:00 PM","12:15 PM","12:30 PM","12:45 PM","1:00 PM","1:15 PM","1:30 PM","1:45 PM","2:00 PM","2:15 PM","2:30 PM"],"air_temp_set_1":[47.0,47.0,47.0,47.0,47.0,48.0,48.0,47.0,47.0,47.0,47.0,47.0,48.0,48.0,48.0,48.0,47.0,47.0,47.0,47.0,47.0,47.0,47.0,47.0,47.0,47.0,47.0,47.0,47.0,47.0,49.0,54.0,57.0,59.0,59.0,58.0,59.0,60.0,61.0,62.0,63.0,70.0,71.0,71.0,71.0,72.0,72.0,72.0],"wind_speed_set_1":[2.0,2.0,4.0,3.0,3.0,3.0,2.0,3.0,4.0,4.0,4.0,3.0,4.0,4.0,5.0,4.0,3.0,3.0,3.0,4.0,3.0,4.0,3.0,3.0,3.0,2.0,3.0,3.0,1.0,2.0,1.0,3.0,1.0,2.0,0.0,1.0,2.0,2.0,1.0,1.0,2.0,4.0,8.0,5.99,7.0,7.0,4.0,8.0],"wind_direction_set_1":[107.0,108.0,76.0,76.0,92.0,86.0,74.0,141.0,89.0,74.0,82.0,114.0,78.0,119.0,114.0,84.0,108.0,99.0,111.0,97.0,81.0,112.0,69.0,69.0,81.0,71.0,70.0,91.0,65.0,92.0,70.0,76.0,130.0,95.0,30.0,246.0,297.0,278.0,290.0,276.0,304.0,190.0,198.0,247.0,180.0,225.0,265.0,230.0],"wind_gust_set_1":[7.0,5.0,7.0,7.0,7.0,5.99,5.0,5.0,5.99,5.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,8.0,7.0,7.0,7.0,7.0,5.0,5.0,5.99,5.0,5.0,5.99,4.0,5.99,5.99,7.0,3.0,4.0,3.0,5.0,7.0,7.0,7.0,9.0,7.0,14.01,28.0,20.0,22.0,14.01,19.0,18.0],"altimeter_set_1":[29.75,29.75,29.75,29.74,29.73,29.74,29.73,29.73,29.73,29.73,29.73,29.73,29.73,29.73,29.73,29.73,29.72,29.72,29.72,29.73,29.73,29.73,29.73,29.73,29.74,29.74,29.74,29.74,29.74,29.74,29.74,29.74,29.74,29.74,29.73,29.73,29.72,29.72,29.71,29.71,29.71,29.7,29.69,29.69,29.68,29.67,29.67,29.66]},"QC_FLAGGED":false,"RESTRICTED":false,"RESTRICTED_METADATA":false},{"ID":"44023","STID":"REY","NAME":"Reynolds Peak","ELEVATION":"9400.0","LATITUDE":"40.662117","LONGITUDE":"-111.646764","STATUS":"ACTIVE","MNET_ID":"6","STATE":"UT","COUNTRY":"US","TIMEZONE":"America\/Denver","ELEV_DEM":"9360.2","PERIOD_OF_RECORD":{"start":"2014-11-23T09:23:00Z","end":"2025-10-08T20:10:00Z"},"UNITS":{"position":"ft","elevation":"ft"},"SENSOR_VARIABLES":{"air_temp":{"air_temp_set_1":{}},"wind_speed":{"wind_speed_set_1":{},"wind_speed_set_2":{}},"wind_direction":{"wind_direction_set_1":{},"wind_direction_set_2":{}},"wind_gust":{"wind_gust_set_1":{}}},"OBSERVATIONS":{"date_time":["2:50 AM","3:00 AM","3:10 AM","3:20 AM","3:30 AM","3:40 AM","3:50 AM","4:00 AM","4:10 AM","4:20 AM","4:30 AM","4:40 AM","4:50 AM","5:00 AM","5:10 AM","5:20 AM","5:30 AM","5:40 AM","5:50 AM","6:00 AM","6:10 AM","6:20 AM","6:30 AM","6:40 AM","6:50 AM","7:00 AM","7:10 AM","7:20 AM","7:30 AM","7:40 AM","7:50 AM","8:00 AM","8:10 AM","8:20 AM","8:30 AM","8:40 AM","8:50 AM","9:00 AM","9:10 AM","9:20 AM","9:30 AM","9:40 AM","9:50 AM","10:00 AM","10:10 AM","10:20 AM","10:30 AM","10:40 AM","10:50 AM","11:00 AM","11:10 AM","11:20 AM","11:30 AM","11:40 AM","11:50 AM","12:00 PM","12:10 PM","12:20 PM","12:30 PM","12:40 PM","12:50 PM","1:00 PM","1:10 PM","1:20 PM","1:30 PM","1:40 PM","1:50 PM","2:00 PM","2:10 PM"],"air_temp_set_1":[46.07,45.86,46.24,45.97,46.04,45.94,45.66,45.62,45.39,45.42,45.46,45.68,45.66,45.8,46.08,46.09,45.88,45.92,45.95,46.11,46.31,45.59,45.66,45.64,45.88,46.02,46.12,46.01,46.02,46.24,45.82,46.56,46.83,46.79,46.56,46.62,47.06,47.49,47.72,48.21,48.61,49.1,49.8,50.0,50.07,50.3,50.59,51.23,51.27,52.05,52.67,52.68,52.49,52.64,53.3,54.03,53.43,54.71,54.18,54.03,54.24,54.8,55.09,54.72,55.16,55.31,54.45,53.91,53.95],"wind_speed_set_1":[11.93,12.13,11.99,9.9,9.82,9.49,8.31,8.14,8.65,11.48,11.12,12.41,12.86,12.97,11.98,12.91,11.2,11.91,11.31,13.38,11.37,13.41,13.2,10.92,11.7,10.79,12.2,11.32,11.55,13.2,12.3,15.39,14.88,14.99,13.01,13.45,13.97,14.97,14.76,13.56,14.14,13.42,16.28,16.59,17.73,18.6,15.72,14.63,13.61,13.86,14.8,14.87,15.25,13.78,15.02,16.43,14.04,14.65,18.43,17.26,14.42,15.56,16.34,15.88,15.99,17.58,16.49,18.18,16.95],"wind_direction_set_1":[171.1,166.8,173.3,172.5,168.4,164.9,163.4,157.6,159.7,160.8,160.8,165.1,164.4,166.9,167.1,165.3,170.6,167.3,163.3,162.0,165.2,158.8,164.2,166.2,165.6,173.3,168.6,166.4,172.8,173.2,182.5,181.4,186.7,189.4,176.8,187.0,176.6,192.4,183.9,189.2,184.3,181.8,190.3,192.0,188.6,194.6,186.1,177.2,184.0,186.0,184.9,178.5,182.2,186.0,184.8,173.2,181.0,179.4,172.7,176.3,181.6,175.6,185.5,176.2,179.3,181.5,190.9,193.2,188.1],"wind_gust_set_1":[23.97,15.9,16.77,15.77,12.05,11.43,10.18,11.55,10.93,14.9,14.77,16.02,16.64,18.01,15.4,17.02,16.27,17.26,13.53,22.73,15.14,17.26,19.13,17.64,15.77,20.74,21.61,17.13,19.62,22.6,19.75,24.34,22.73,23.97,19.38,21.98,18.75,21.73,23.6,18.87,22.11,19.49,29.8,27.95,28.32,28.07,21.98,25.71,20.62,20.86,21.49,24.34,20.11,20.24,23.97,24.09,25.46,24.21,29.44,29.18,20.74,25.46,23.6,28.56,23.84,28.94,24.21,28.32,27.7],"wind_speed_set_2":[null,null,null,null,null,null,null,11.28,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,12.88,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],"wind_direction_set_2":[null,null,null,null,null,null,null,164.9,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,173.3,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null]},"QC_FLAGGED":false,"RESTRICTED":false,"RESTRICTED_METADATA":false},{"ID":"63736","STID":"UTOLY","NAME":"I-215 at Olympus Cove","ELEVATION":"4972.0","LATITUDE":"40.6826","LONGITUDE":"-111.7973","STATUS":"ACTIVE","MNET_ID":"4","STATE":"UT","COUNTRY":"US","TIMEZONE":"America\/Denver","ELEV_DEM":"4973.8","PERIOD_OF_RECORD":{"start":"2017-11-30T05:25:00Z","end":"2025-10-08T20:10:00Z"},"UNITS":{"position":"ft","elevation":"ft"},"SENSOR_VARIABLES":{"air_temp":{"air_temp_set_1":{}},"wind_speed":{"wind_speed_set_1":{}},"wind_direction":{"wind_direction_set_1":{}},"wind_gust":{"wind_gust_set_1":{}}},"OBSERVATIONS":{"date_time":["2:50 AM","3:00 AM","3:10 AM","3:20 AM","3:30 AM","3:40 AM","3:50 AM","4:00 AM","4:10 AM","4:20 AM","4:30 AM","4:40 AM","4:50 AM","5:00 AM","5:10 AM","5:20 AM","5:30 AM","5:40 AM","5:50 AM","6:00 AM","6:10 AM","6:20 AM","6:30 AM","6:40 AM","6:50 AM","7:00 AM","7:10 AM","7:20 AM","7:30 AM","7:40 AM","7:50 AM","8:00 AM","8:10 AM","8:20 AM","8:30 AM","8:40 AM","8:50 AM","9:00 AM","9:10 AM","9:20 AM","9:30 AM","9:40 AM","9:50 AM","10:00 AM","10:10 AM","10:20 AM","10:30 AM","10:40 AM","10:50 AM","11:00 AM","11:10 AM","11:20 AM","11:30 AM","11:40 AM","11:50 AM","12:00 PM","12:10 PM","12:20 PM","12:30 PM","12:40 PM","12:50 PM","1:00 PM","1:10 PM","1:20 PM","1:30 PM","1:40 PM","1:50 PM","2:00 PM","2:10 PM","2:20 PM"],"air_temp_set_1":[46.08,46.38,46.08,45.89,46.37,46.89,47.17,47.65,46.11,47.28,47.3,46.22,47.72,47.62,46.55,45.72,46.46,46.66,46.56,47.0,46.24,44.85,45.71,45.57,45.17,44.96,45.21,46.52,45.79,45.65,46.8,45.86,46.79,46.03,45.17,45.9,48.26,49.75,52.44,53.8,55.39,56.7,57.18,57.58,56.83,57.48,58.18,59.29,59.93,60.63,61.78,62.25,62.67,63.16,63.82,64.45,64.79,64.64,65.23,66.28,67.32,67.72,67.74,67.7,68.68,69.08,68.81,69.9,70.53,71.87],"wind_speed_set_1":[4.67,4.02,3.29,4.28,5.27,3.64,3.2,4.12,2.89,4.7,4.76,4.13,4.79,4.14,4.25,2.99,4.26,4.93,5.13,4.35,3.54,2.47,3.23,2.96,4.17,4.93,4.17,2.27,4.2,1.25,3.99,3.62,4.41,3.62,3.68,4.32,4.73,2.31,2.24,2.53,1.51,1.24,0.0,2.2,1.25,0.85,1.84,0.48,1.96,1.37,0.23,1.36,2.84,1.22,2.32,0.91,0.98,3.29,2.29,2.68,2.1,0.3,1.64,2.88,1.99,3.54,4.44,5.31,6.69,5.39],"wind_direction_set_1":[120.0,104.6,143.1,111.1,93.1,121.6,150.3,135.8,87.9,150.3,117.6,108.5,108.2,133.6,146.0,69.77,116.6,109.3,126.4,131.8,127.4,119.1,79.52,85.1,105.3,93.0,71.13,115.1,110.7,45.23,95.4,96.9,91.3,100.1,148.9,90.4,112.0,93.1,137.5,134.1,234.6,272.7,0.0,268.8,280.8,269.0,314.4,284.9,328.6,320.1,253.5,13.0,330.4,333.4,296.0,12.16,16.53,6.0,14.1,331.8,269.3,306.6,221.3,209.0,8.49,324.8,7.08,340.1,4.09,291.1],"wind_gust_set_1":[5.7,5.48,5.26,5.48,6.35,5.7,5.26,5.26,5.04,5.48,6.79,5.91,6.13,5.04,6.13,5.04,5.7,5.48,6.57,7.24,5.26,4.6,5.7,5.7,4.82,5.48,6.13,5.04,5.7,6.57,6.79,5.04,5.91,5.04,5.26,6.35,6.79,4.6,5.04,4.6,5.91,3.29,3.73,3.51,3.73,3.07,3.07,2.85,4.82,4.17,4.82,4.38,4.82,5.26,5.7,5.48,6.13,5.48,5.26,5.7,5.26,4.38,6.13,7.01,6.79,6.13,8.99,7.67,10.74,11.17]},"QC_FLAGGED":false,"RESTRICTED":false,"RESTRICTED_METADATA":false}],"SUMMARY":{"NUMBER_OF_OBJECTS":11,"RESPONSE_CODE":1,"RESPONSE_MESSAGE":"OK","METADATA_QUERY_TIME":"6.0 ms","METADATA_PARSE_TIME":"0.3 ms","TOTAL_METADATA_TIME":"6.3 ms","DATA_QUERY_TIME":"8.1 ms","QC_QUERY_TIME":"10.1 ms","DATA_PARSE_TIME":"12.1 ms","TOTAL_DATA_TIME":"30.3 ms","TOTAL_TIME":"36.6 ms","VERSION":"v2.30.1"},"QC_SUMMARY":{"QC_CHECKS_APPLIED":["sl_range_check"],"TOTAL_OBSERVATIONS_FLAGGED":0,"PERCENT_OF_TOTAL_OBSERVATIONS_FLAGGED":0.0},"UNITS":{"position":"ft","elevation":"ft","air_temp":"Fahrenheit","wind_speed":"Miles\/hour","wind_direction":"Degrees","altimeter":"INHG","wind_gust":"Miles\/hour"}};
    timeSeries(timeSeriesData.STATION); // timeseries.js
  }

  // Get NWS API data (documentation: https://www.weather.gov/documentation/services-web-api)
  async function getNWSForecast() {
    const nwsForecastURL = 'https://api.weather.gov/gridpoints/SLC/97,175/forecast';
    const nwsForecastData = await (await fetch(nwsForecastURL)).json();
    nwsForecast(nwsForecastData.properties.periods); // main.js
  }

  // Get Area Forecast text via the SLC Area Forecast page
  async function getAreaForecast() {
    const areaForecastURL = 'https://forecast.weather.gov/product.php?site=NWS&issuedby=SLC&product=AFD&format=TXT&version=1';
    const areaForecastPageContent = await (await fetch(areaForecastURL)).text();
    areaForecast(areaForecastPageContent); // main.js
  }

  // Get Wind Map metadata from GCP Cloud Storage
  async function getWindMap() {
    const windMapDataURL = 'https://storage.googleapis.com/storage/v1/b/wasatch-wind-static/o/wind-map-save.png';
    const windMapData = await (await fetch(windMapDataURL)).json();
    windMap(windMapData); // main.js
  }

  await Promise.all([
    getOpenMeteoAndWindAloft(),
    getSoundingAndSoaring(),
    getTimeSeries(),
    getNWSForecast(),
    getAreaForecast(),
    getWindMap()
  ]);
})();